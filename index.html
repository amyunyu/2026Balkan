<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>山陰山陽・自駕秋旅</title>
    
    <!-- Favicon & App Icon (神話與結緣・注連繩概念) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%232E4B71%22/><circle cx=%2250%22 cy=%2250%22 r=%2235%22 stroke=%22%23d4a373%22 stroke-width=%226%22 fill=%22none%22/><path d=%22M50 30c-8.3 0-15 6.7-15 15 0 9 15 25 15 25s15-16 15-25c0-8.3-6.7-15-15-15zm0 20a5 5 0 1 1 0-10 5 5 0 0 1 0 10z%22 fill=%22%23BC412B%22/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%232E4B71%22/><circle cx=%2250%22 cy=%2250%22 r=%2235%22 stroke=%22%23d4a373%22 stroke-width=%226%22 fill=%22none%22/><path d=%22M50 30c-8.3 0-15 6.7-15 15 0 9 15 25 15 25s15-16 15-25c0-8.3-6.7-15-15-15zm0 20a5 5 0 1 1 0-10 5 5 0 0 1 0 10z%22 fill=%22%23BC412B%22/></svg>">

    <!-- 載入 React 核心 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <!-- 載入 Babel 解析器 -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 載入字型 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;800&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fcfaf2; /* 和紙白 */
            color: #2b2b2b;
        }
        .font-serif {
            font-family: 'Shippori Mincho', serif;
        }
        /* 隱藏捲軸但保留功能 */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        
        /* 動畫類 */
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 圖示組件 ---
        const Icons = {
            MapPin: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Navigation: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>,
            Calendar: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            CloudSun: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 2v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="M20 12h2"/><path d="m19.07 4.93-1.41 1.41"/><path d="M15.947 12.65a4 4 0 0 0-5.925-4.128"/><path d="M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"/></svg>,
            CloudRain: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>,
            Sun: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41-1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>,
            Utensils: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>,
            BedDouble: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 8h20"/><path d="M5 8v-1a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1"/><path d="M4 16v2"/><path d="M20 16v2"/><path d="M2 20h20"/><path d="M6 8h12a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2Z"/></svg>,
            Camera: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>,
            Car: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/><path d="M2 12h20"/></svg>,
            Info: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            BookOpen: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
            Phone: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
            Plane: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 12h5"/><path d="M13 12H2"/><path d="M10 20v-8"/><path d="m22 2-9 10"/><path d="m13 12-2.5 7.5"/><path d="M10 4v8"/><path d="m22 22-9-10"/></svg>,
            Wallet: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>,
            ChevronLeft: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m15 18-6-6 6-6"/></svg>,
            ChevronRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m9 18 6-6-6-6"/></svg>,
            Star: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
            Coffee: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" x2="6" y1="1" y2="4"/><line x1="10" x2="10" y1="1" y2="4"/><line x1="14" x2="14" y1="1" y2="4"/></svg>,
            Clock: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            FileText: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>,
            Flower2: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1"/></svg>,
            ExternalLink: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>,
            ArrowLeft: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>,
            Link: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>,
            Check: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="20 6 9 17 4 12"/></svg>,
            Image: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>,
        };

        // --- 完整的行程資料 ---
        const tripData = {
            meta: {
                title: "山陰山陽・自駕秋旅",
                dateRange: "2025.11.28 - 2025.12.08",
                flight: { out: "IT262", in: "IT263" }
            },
            days: [
                {
                    id: 1,
                    date: "11/28 (五)",
                    location: "岡山 ➔ 津山",
                    mainCity: "津山", 
                    spots: [
                        { time: "16:30", name: "岡山機場", type: "transport", note: "抵達，辦理入境" },
                        { 
                            time: "17:30", 
                            name: "機場租車", 
                            type: "transport", 
                            note: "取車出發", 
                            tags: ["查看預約資訊"], 
                            link: "https://maps.app.goo.gl/k3n36FBfJrASq4Rx9",
                            customDetails: [
                                { label: "預約號碼", value: "99992154300", highlight: true },
                                { label: "車型等級", value: "SUV2 YARIS CROSS Hybrid", icon: <Icons.Car className="w-4 h-4" /> },
                                { 
                                    label: "出發店鋪", 
                                    value: "岡山機場店 (TEL：086-294-2100)\n1565 Nichioji, Kita-ku, Okayama-shi, Okayama 701-1131\n岡山市北区日応寺1565",
                                    isAddress: true
                                },
                                { 
                                    label: "還車店鋪", 
                                    value: "岡山站前店\n7-25 Hon-machi, Kita-ku, Okayama-shi, Okayama 700-0901\n岡山市北区本町7-25",
                                    isAddress: true
                                },
                                { 
                                    label: "還車店鋪地圖連結", 
                                    value: "點此導航", 
                                    isAddress: false,
                                    linkUrl: "https://maps.app.goo.gl/Nr5s9fA2sAyjZgxF8"
                                },
                                { label: "出發時間", value: "11/28/2025 17:30", icon: <Icons.Clock className="w-4 h-4" /> },
                                { label: "還車時間", value: "12/06/2025 16:00", icon: <Icons.Clock className="w-4 h-4" /> },
                            ]
                        },
                        { 
                            time: "18:30", 
                            name: "THE SHIROYAMA TERRACE 津山別邸", 
                            type: "hotel", 
                            note: "Check-in。溫泉時間13:30-24:00；6:00-10:00" 
                        },
                        { 
                            time: "19:30", 
                            name: "津山晚餐", 
                            type: "food", 
                            tags: ["必吃美食", "點擊看推薦"], 
                            note: "",
                            hideNav: true, 
                            subSpots: [
                                { 
                                    name: "Izakaya Osome お染", 
                                    note: "步行8m / 居酒屋", 
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Izakaya+Osome+Tsuyama"
                                },
                                { 
                                    name: "北海", 
                                    note: "步行5m", 
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Hokkai+Tsuyama"
                                },
                                { 
                                    name: "Bokkemon炙家 ぼっけもん", 
                                    note: "步行6m", 
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Bokkemon+Tsuyama"
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 2,
                    date: "11/29 (六)",
                    location: "津山深度遊",
                    mainCity: "津山",
                    spots: [
                        { time: "09:00", name: "津山城 (鶴山公園)", type: "sight", note: "日本百大名城", 
                            link: "https://maps.app.goo.gl/8XqZ1v8e9r8q9q8q7",
                            tags: ["百名城", "賞櫻名所"],
                            customDetails: [
                                {
                                    label: "百大名城",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "津山城是日本三大平山城之一，由森蘭丸的弟弟森忠政耗時13年建成。雖然天守閣已不復存在，但其雄偉的石垣至今仍保留完整，高達45公尺，令人震撼。"
                                },
                                {
                                    label: "賞櫻勝地",
                                    icon: <Icons.Flower2 className="w-4 h-4" />,
                                    value: "鶴山公園是西日本著名的賞櫻景點，入選「日本櫻花名所100選」。園內種植了約1000棵櫻花樹，春天時粉櫻與石垣相映成趣，美不勝收。"
                                }
                            ]
                        },
                        { 
                            time: "10:30", 
                            name: "津山洋學資料館", 
                            type: "sight", 
                            tags: ["冷知識"],
                            customDetails: [
                                {
                                    label: "珈琲的語源",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "咖啡的荷蘭語是「koffie」，當時的日本人試圖用漢字表記這個外來語，如：可否、可非、架非、哥非乙、黑炒豆等，但都無法被廣泛接受。據聞是直到宇田川榕菴用象徵古代女性花簪的「珈」和貫珠的「琲」兩字，貼切又優雅地形容咖啡果實的模樣，而後成為日本人百年來稱呼這項西方黑茶的通稱。"
                                },
                                {
                                    label: "參考文章",
                                    value: "閱讀更多關於津山咖啡的故事",
                                    linkUrl: "https://hatsumimi-mag.com/2025/02/26/tsuyama001/"
                                }
                            ]
                        },
                        { 
                            time: "11:30", 
                            name: "福壽湯 Cafe Fukujuyu", 
                            type: "coffee", 
                            tags: ["特色建築"],
                            customDetails: [
                                {
                                    label: "錢湯變身",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "這棟始於明治30年的錢湯建築，咖啡店內分為前後兩區。昔日錢湯負責收錢的「番台」，被廣戶先生以新潮的咖啡吧檯重新詮釋。吧檯側面貼滿的舊報紙，以及貼在門內的舊電影海報，都是他整理後方空間時所發現。以前的人會把報紙和海報放在榻榻米下作為除濕之用，意外留下這些珍貴的紙本。如果仔細尋找門上的海報，還能找到昭和40年的3碼電話。"
                                },
                                {
                                    label: "特色菜單",
                                    icon: <Icons.Coffee className="w-4 h-4" />,
                                    value: "目前店內提供三款黑咖啡：深焙巴西豆的手沖、愛樂壓濃縮，以及端看店主人當下心情的「即興咖啡」（きまぐれ珈琲）。除此，還有多種花式咖啡、蘇打水與酒精飲料。紅豆和卡士達兩種口味的「鯉魚燒」（コイ焼き）則來自店主的創意。由於津山不靠海、只有河，於是店主把鯛魚燒換成鯉魚燒。"
                                }
                            ]
                        },
                        { 
                            time: "12:30", 
                            name: "日進月步", 
                            type: "food", 
                            tags: ["午餐"], 
                            note: "蕎麥麵料理。11:30–13:30。",
                            link: "https://maps.app.goo.gl/UGV1S3HYVyxNh5Kp7"
                        },
                        { 
                            time: "14:00", 
                            name: "城西浪漫館 (中島病院舊本館)", 
                            type: "sight", 
                            tags: ["建築巡禮"],
                            customDetails: [
                                {
                                    label: "建築歷史",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "這棟美麗的二層木造建築前身為中島醫院，建於1917年。站在入口就能清楚看見，正面中央突出的二樓陽臺、科林斯式柱和上方的圓頂屋頂，典型的歐式建築裝飾。這座建物出自生前在津山留下眾多傑出建築的大工匠池田豐太郎之手。1997年NHK晨間劇《阿久里》還曾在此取景，如今已是津山市的地標建築之一。"
                                }
                            ]
                        },
                        { 
                            time: "15:30", 
                            name: "So's Cafe", 
                            type: "coffee", 
                            link: "https://maps.app.goo.gl/BamJqcxEp4sLSXjT7",
                            customDetails: [
                                {
                                    label: "江戶咖啡再現",
                                    icon: <Icons.Coffee className="w-4 h-4" />,
                                    value: "津山洋學資料館參考宇田川榕菴手繪稿重現的當時煮咖啡的器具（コーヒーカン，一種咖啡煮器，在荷蘭語中意指咖啡壺），這裡也有可實際使用的複製品。"
                                },
                                {
                                    label: "嚴選豆種",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "為了重現江戶時代的咖啡風味，店內特地選用和當時相同品種、十七世紀荷蘭人開始在印尼栽種的爪哇阿拉比卡豆。客人可選擇使用複刻當時的咖啡器具（2至5人份），或是手沖萃取。"
                                }
                            ]
                        },
                        { 
                            time: "18:00", 
                            name: "燒肉千惠", 
                            type: "food", 
                            tags: ["必吃美食"], 
                            note: "享用津山著名的肉類料理",
                            link: "https://maps.app.goo.gl/egUkAwXr6KZjpWkk7"
                        },
                        { time: "20:00", name: "THE SHIROYAMA TERRACE 津山別邸", type: "hotel", note: "續住一晚，享受溫泉" }
                    ]
                },
                {
                    id: 3,
                    date: "11/30 (日)",
                    location: "勝山町新庄宿",
                    mainCity: "安來",
                    spots: [
                        {
                            time: "08:30",
                            name: "早餐",
                            type: "food",
                            note: "於飯店內享用早餐，隨後辦理退房"
                        },
                        { 
                            time: "10:00", 
                            name: "勝山町老街保存地區", 
                            type: "sight", 
                            note: "漫步暖簾之町",
                            tags: ["詳細情報"],
                            link: "https://maps.app.goo.gl/HQ1R57tqi9Es1fBg7",
                            customDetails: [
                                {
                                    label: "駐車場ナビ",
                                    value: "點此開啟停車場導航",
                                    isAddress: false,
                                    linkUrl: "https://maps.app.goo.gl/mzjtrKQP1Xyjk1au6",
                                    icon: <Icons.Car className="w-4 h-4" />
                                },
                                {
                                    label: "老街特色",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "漫步のれん門簾之町老街、咖啡小店。這裡是日本第一個指定老街保存區，保留了濃厚的江戶風情。"
                                },
                                {
                                    label: "推薦探訪",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "ひのき草木染織工房 (Hinoki)",
                                    linkUrl: "https://www.google.com/maps/search/?api=1&query=Hinoki+Grass+Dyeing+Weaving+Workshop+Katsuyama"
                                }
                            ]
                        },
                        { 
                            time: "12:00", 
                            name: "勝山町午餐", 
                            type: "food", 
                            note: "點擊查看推薦餐廳",
                            tags: ["午餐推薦"],
                            subSpots: [
                                { 
                                    name: "Romantei (ろまん亭)", 
                                    note: "當地人氣洋食", 
                                    type: "food",
                                    link: "https://maps.app.goo.gl/46wWkwgogatMVLAp6"
                                },
                                { 
                                    name: "西蔵 (Nishigura)", 
                                    note: "酒造改建餐廳，氣氛極佳", 
                                    type: "food",
                                    link: "https://maps.app.goo.gl/aoUGZjRXtUeWR6rb7"
                                }
                            ]
                        },
                        { 
                            time: "14:00", 
                            name: "玉雲大權現宮", 
                            type: "sight", 
                            link: "https://maps.app.goo.gl/X78GbGZwaLAr2VWb6",
                            tags: ["能量景點"],
                            customDetails: [
                                {
                                    label: "景點介紹",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "這裡以巨大的杉木聞名，被視為能量景點。境內氛圍莊嚴神秘，巨木參天，是感受大自然與神聖氣息的好地方。"
                                }
                            ]
                        },
                        { 
                            time: "15:00", 
                            name: "新庄宿", 
                            type: "sight", 
                            note: "建議走 R181 轉米子自動車道",
                            link: "https://maps.app.goo.gl/kFW6tb4oNTUqujgR8?g_st=ipc",
                            tags: ["宿場町"],
                            customDetails: [
                                {
                                    label: "歷史風情",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "新庄宿是舊出雲街道上的宿場町，曾是參勤交代隊伍往來的交通要衝。街道兩旁保留著美麗的凱旋櫻並木，雖然秋天沒有櫻花，但古色古香的街道依然充滿風情。"
                                },
                                {
                                    label: "當地名物",
                                    icon: <Icons.Utensils className="w-4 h-4" />,
                                    value: "這裡以「姬糯米 (ヒメノモチ)」聞名。道之驛「凱旋櫻新庄宿」內有販售使用姬糯米製作的各種伴手禮與美食，例如源平餅、牛魔王丼等。"
                                },
                                {
                                    label: "推薦停留",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "道之驛 凱旋櫻新庄宿 (道の駅 がいせん桜 新庄宿)",
                                    linkUrl: "https://maps.app.goo.gl/kFW6tb4oNTUqujgR8?g_st=ipc"
                                }
                            ]
                        },
                        { 
                            time: "17:00", 
                            name: "さぎの湯荘 Saginoyusou", 
                            type: "hotel", 
                            tags: ["重要預約"], 
                            note: "本館2F【朝霧】。一泊二食。在一休.com預定" 
                        }
                    ]
                },
                {
                    id: 4,
                    date: "12/01 (一)",
                    location: "足立美術館。玉造溫泉",
                    mainCity: "玉造",
                    spots: [
                        { 
                            time: "08:30", 
                            name: "早餐 & 退房", 
                            type: "food", 
                            note: "於飯店享用早餐後退房" 
                        },
                        { 
                            time: "09:30", 
                            name: "足立美術館", 
                            type: "sight", 
                            tags: ["必去景點"],
                            note: "連續多年日本第一庭園。含魯山人、近現代日本畫收藏。",
                            link: "https://maps.app.goo.gl/6aLNh24U6E92D9XSA",
                            customDetails: [
                                {
                                    label: "日本第一庭園",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "由足立全康創立，以「庭園本身就是一幅畫」為理念。其枯山水庭園連續20年以上被美國日本庭園專門雜誌評選為日本第一，四季景色皆如畫卷般美麗。"
                                },
                                {
                                    label: "必看館藏",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "館內收藏了大量近代日本畫大師「橫山大觀」的作品，數量約120件，是日本質量首屈一指的收藏。此外還有北大路魯山人的陶藝作品等。"
                                }
                            ]
                        },
                        { 
                            time: "12:00", 
                            name: "川西屋", 
                            type: "food", 
                            note: "午餐",
                            link: "https://maps.app.goo.gl/QVei4XzB7Rp83RCn7" 
                        },
                        {
                            time: "13:30", 
                            name: "安來市立歷史資料館",
                            type: "sight",
                            link: "https://maps.app.goo.gl/MbDosqLUVPztsptp8",
                            note: "百名城印章、御城印",
                            tags: ["百名城", "御城印"],
                            customDetails: [
                                {
                                    label: "攻略",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "百名城印章、御城印，拿完御城印步行前往月山富田城"
                                },
                                {
                                    label: "營業資訊",
                                    icon: <Icons.Clock className="w-4 h-4" />,
                                    value: "週二公休"
                                }
                            ]
                        },
                        { 
                            time: "13:45", 
                            name: "月山富田城遺跡", 
                            type: "sight", 
                            note: "建議車停資料館，步行登山 (約40-60分)",
                            tags: ["難攻不落"],
                            link: "https://maps.app.goo.gl/4kraXq8QHS7x9JGPA",
                            customDetails: [
                                {
                                    label: "城郭歷史",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "月山富田城是戰國大名尼子氏六代的居城，被譽為「難攻不落」的天下名城。這座山城利用了險峻的地形建造，在戰國時代曾抵擋過毛利元就的百萬大軍包圍，是日本百大名城之一。"
                                },
                                {
                                    label: "交通建議",
                                    icon: <Icons.Navigation className="w-4 h-4" />,
                                    value: "車輛請停放於安來市立歷史資料館（免費停車），此處為登山入口。攻頂本丸需步行約 40-60 分鐘，請穿著輕便好走的鞋子。"
                                }
                            ]
                        },
                        {
                            time: "15:15",
                            name: "前往界 玉造",
                            type: "transport",
                            note: "步行回資料館取車，前往住宿地點",
                            link: "https://maps.app.goo.gl/Ej2URsYvJAdR2szc7"
                        },
                        { 
                            time: "16:00", 
                            name: "星野集團 界 玉造", 
                            type: "hotel", 
                            tags: ["頂級住宿", "必看表演"],
                            note: "一泊二食。已預約17:30用餐",
                            link: "https://maps.app.goo.gl/FbPtbQFoDyGGCKYf6",
                            customDetails: [
                                {
                                    label: "石見神樂 (21:30)",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "神樂是一種為了酬神所表演的舞蹈，星野集團 界 玉造所表演的曲目《八岐大蛇》，是改編自以出雲地區為舞台的神話故事。"
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 5,
                    date: "12/02 (二)",
                    location: "松江城",
                    mainCity: "松江",
                    spots: [
                        {
                            time: "08:00",
                            name: "早餐：界玉造",
                            type: "food",
                            note: "於界 玉造享用早餐，隨後開車前往松江城"
                        },
                        { 
                            time: "09:30", 
                            name: "松江城", 
                            type: "sight", 
                            tags: ["國寶", "千鳥城"],
                            link: "https://maps.app.goo.gl/NaKgbmG5FmR6hGAF6",
                            customDetails: [
                                {
                                    label: "國寶天守",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "日本僅存的12座原始城堡之一，因屋頂像千鳥展翅，又名「千鳥城」。建議先逛城再搭船。"
                                },
                                {
                                    label: "歷史簡介",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "松江城始建於1607年，由戰國武將堀尾吉晴耗時5年築成。作為山陰地區唯一現存的天守，它在2015年被指定為日本國寶。雖然明治時代曾經歷廢城令的危機，但在當地有志之士的集資下，天守閣幸免於難。其黑色的外牆與軍事風格的實戰設計是其最大特色。"
                                }
                            ]
                        },
                        { time: "11:00", name: "堀川遊覽船", type: "sight", note: "暖桌船體驗 (需脫鞋)" },
                        { 
                            time: "12:00", 
                            name: "八雲庵", 
                            type: "food", 
                            tags: ["必吃美食"], 
                            note: "鴨南蠻蕎麥麵 (週四休)",
                            link: "https://maps.app.goo.gl/oA4BFKWhzNSqa6BN6"
                        },
                        { 
                            time: "13:00", 
                            name: "塩見縄手", 
                            type: "sight", 
                            note: "日本之道100選，武家屋敷散策",
                            tags: ["歷史街道"],
                            customDetails: [
                                {
                                    label: "松江城下町",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "以小泉八雲舊居為首，武家屋敷風格的房屋臨著護城河，屋簷相連，保留了松江最具城下町風情的樣貌。從小泉八雲紀念館前至明々庵入口這段長約500公尺的區域，於昭和48年（1973年）被松江市指定為「傳統美觀地區」，並受到保護。"
                                },
                                {
                                    label: "地名由來",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "這一帶曾是俸祿在500石至1,000石、屬於「中老格」的藩士宅邸並列之處。塩見縄手（Shiomi Nawate）這個名稱，源自於此處曾有松江藩中老塩見小兵衛的宅邸。「縄手」（Nawate）指的是在平坦地面上細長延伸的一條筆直道路。"
                                },
                                {
                                    label: "歷史背景",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "慶長年間，堀尾吉晴在構築松江城時，將赤山與城山切割開來，開鑿了內護城河。這項工程從慶長12年（1607年）開始，歷時一年多完成。這裡形成中老格家臣宅邸區，是在寬永15年（1638年）松平直政入主松江藩之後。"
                                }
                            ]
                        },
                        { 
                            time: "15:00", 
                            name: "鰐淵寺", 
                            type: "sight", 
                            link: "https://maps.app.goo.gl/h8TijRXuDYsQ5abN7",
                            tags: ["古剎"],
                            customDetails: [
                                {
                                    label: "歷史由來",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "鰐淵寺在西元594年創立，可追朔到推古天皇二年（594年），來自長野地區的智春上人在浮浪瀑布祈求天皇眼睛疾病可早日平癒，因此被另建造此寺作為天皇的勅願寺（天皇、上皇發願期許國家與皇室繁盛平安）。"
                                },
                                {
                                    label: "名稱傳說",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "名稱由來據說是因為當時智春上人在祈願時法器掉落於河中，被河中的鱷魚撿回了法器，所以才以「鰐淵」名之。"
                                }
                            ]
                        },
                        { 
                            time: "17:00", 
                            name: "Centurion Hotel & Spa Classic Izumo", 
                            type: "hotel", 
                            link: "https://maps.app.goo.gl/d1nbWNtvLxRVLJBj8",
                            note: "Booking。不含早餐" 
                        },
                        {
                            time: "18:30",
                            name: "出雲料理 おくに 本店",
                            type: "food",
                            tags: ["推薦", "松葉蟹", "出雲料理"],
                            note: "出雲市站步行3分，老字號和食。冬季有機會提供松葉蟹（需預約/時價）。\n營業時間：17:00 - 23:00",
                            link: "https://maps.app.goo.gl/mTPEAT7aaeR9nsxn6?g_st=ipc",
                            customDetails: [
                                {
                                    label: "必吃料理",
                                    icon: <Icons.Utensils className="w-4 h-4" />,
                                    value: "除了季節限定的松葉蟹，這裡的「出雲料理」也非常有名，包含宍道湖七珍（如蜆料理）、割子蕎麥麵等。"
                                },
                                {
                                    label: "營業時間",
                                    icon: <Icons.Clock className="w-4 h-4" />,
                                    value: "17:00 - 23:00"
                                },
                                {
                                    label: "松葉蟹",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "冬季限定！若想品嚐活松葉蟹（刺身、燒烤、鍋物），請務必提前電話預約確認是否有貨及價格。",
                                    highlight: true
                                }
                            ],
                            subSpots: [
                                {
                                    name: "地圖導航",
                                    note: "點此開啟 Google Maps",
                                    type: "transport",
                                    link: "https://maps.app.goo.gl/mTPEAT7aaeR9nsxn6?g_st=ipc"
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 6,
                    date: "12/03 (三)",
                    location: "出雲大社。神在祭",
                    mainCity: "出雲",
                    spots: [
                        { 
                            time: "08:30", 
                            name: "ふじひろ珈琲", 
                            type: "food", 
                            note: "早餐",
                            link: "https://maps.app.goo.gl/q4DkHmCbzFi5wz6D7" 
                        },
                        { 
                            time: "09:30", 
                            name: "出雲大社", 
                            type: "sight", 
                            link: "https://maps.app.goo.gl/oykq6vdCMoBYoY9E6",
                            tags: ["重點行程", "神在月"], 
                            note: "參拜禮儀：二禮、四拍手、一禮",
                            customDetails: [
                                {
                                    label: "大國主大神",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "供奉的大神是日本的開拓大神「大國主大神」，相傳他是一位結緣的大神。"
                                },
                                {
                                    label: "參拜禮儀",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "鞠躬2次，拍手4次，再鞠躬1次。",
                                    highlight: true
                                },
                                {
                                    label: "御砂祈願攻略",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "先至稻佐之濱取砂（可先備好小袋子），參拜後，將這份砂供奉於素鵞社社殿下方，透過「以砂換砂」的循環，再取回原本供奉於素鵞社的御砂帶回家。帶回家後，可放於門口或重要的位置，作為神明的守護與祝福。"
                                },
                                {
                                    label: "夜神樂祈禱",
                                    icon: <Icons.Clock className="w-4 h-4" />,
                                    value: "11月30日～12月5日午後5時，神樂殿將舉辦各種祈禱節日「夜神樂祈禱」。"
                                },
                                {
                                    label: "境內圖 (PDF)",
                                    value: "點擊開啟",
                                    linkUrl: "https://izumooyashiro.or.jp/wp-content/uploads/2025/10/d20251010_nai.pdf"
                                },
                                {
                                    label: "境外圖 (PDF)",
                                    value: "點擊開啟",
                                    linkUrl: "https://izumooyashiro.or.jp/wp-content/uploads/2025/10/d20251010_gai.pdf"
                                },
                                {
                                    label: "官方網站",
                                    value: "出雲大社官網",
                                    linkUrl: "https://izumooyashiro.or.jp/"
                                },
                                {
                                    label: "參考文章",
                                    value: "參拜順序參考",
                                    linkUrl: "https://chugoku.letsgojp.com/archives/636605/"
                                }
                            ]
                        },
                        { 
                            time: "12:30", 
                            name: "神門通", 
                            type: "sight", 
                            note: "逛街、午餐、吃善哉",
                            tags: ["午餐推薦", "商店街"],
                            customDetails: [
                                {
                                    label: "神門通介紹",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "神門通是出雲大社的表參道，從宇迦橋大鳥居延伸至勢溜大鳥居，全長約700公尺。這條街道保留了許多傳統建築，聚集了眾多特色商店、咖啡館與紀念品店。必吃美食包括出雲蕎麥麵與源自當地的「善哉」（紅豆湯）。"
                                }
                            ],
                            subSpots: [
                                {
                                    name: "砂屋 (Sunaya)",
                                    note: "Tabelog 2025百名店 (11:00–15:00)",
                                    type: "food",
                                    link: "https://maps.app.goo.gl/AjJQJjpe6SGRbuct6"
                                },
                                {
                                    name: "荒木屋 (Arakiya)",
                                    note: "出雲蕎麥老店 (11:00–16:00)",
                                    type: "food",
                                    link: "https://maps.app.goo.gl/pKVUojnrqQYxqZ1F9"
                                },
                                {
                                    name: "そば処 出雲えにし",
                                    note: "位於神門通上 (11:00–16:00)",
                                    type: "food",
                                    link: "https://maps.app.goo.gl/NqprPSzaVj7vCWmk6"
                                }
                            ]
                        },
                        { 
                            time: "14:00", 
                            name: "日御碕神社", 
                            type: "sight", 
                            note: "紅白相間的美麗神社",
                            link: "https://maps.app.goo.gl/MFeGsKQLW5AkhsbW6"
                        },
                        {
                            time: "16:00",
                            name: "稻佐之濱",
                            type: "sight", 
                            note: "觀賞夕陽、取御砂",
                            tags: ["夕陽", "神話舞台"],
                            link: "https://maps.app.goo.gl/nsbupGHf9Kiy6Qn29",
                            customDetails: [
                                {
                                    label: "國讓神話舞台",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "稻佐之濱是《古事記》中「國讓神話」的舞台，傳說建御雷神在此與大國主神談判交出國家。海灘上聳立的「弁天島」供奉著海神豐玉毘古命，是此地的象徵。"
                                },
                                {
                                    label: "神在月迎神",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "每年農曆10月10日晚間，全日本的八百萬神明會先降臨於此，舉行莊嚴的「神迎神事」，隨後前往出雲大社。"
                                },
                                {
                                    label: "夕陽絕景",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "這裡入選為「日本海濱百選」與「日本夕陽百選」，夕陽西下時，弁天島的剪影與火紅天空倒映在海面上，景色夢幻迷人。"
                                }
                            ]
                        },
                        { 
                            time: "18:00", 
                            name: "出雲晚餐", 
                            type: "food", 
                            note: "點擊查看推薦餐廳",
                            tags: ["晚餐推薦"],
                            subSpots: [
                                {
                                    name: "Yaoyorozu (やおよろず)",
                                    note: "飯店附近和食 (17:30–22:00)",
                                    type: "food",
                                    link: "https://maps.app.goo.gl/s1XSw2zczfviXsjY7"
                                },
                                {
                                    name: "羽根屋 本店",
                                    note: "獻上出雲蕎麥 (17:00–19:00)",
                                    type: "food",
                                    link: "https://maps.app.goo.gl/7t4Fwx7omVbQTcpJA"
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 7,
                    date: "12/04 (四)",
                    location: "吹屋故鄉村",
                    mainCity: "高梁",
                    spots: [
                        {
                            time: "08:30",
                            name: "早餐",
                            type: "food",
                            note: "於飯店內享用早餐，隨後辦理退房"
                        },
                        {
                            time: "09:00",
                            name: "出發前往吹屋",
                            type: "transport",
                            note: "建議選擇最快路線 (約2小時28分)，途經松江自動車道 (免費區間多) 與中國自動車道。比起山路更舒適好開。",
                            link: "https://maps.app.goo.gl/DkasesLFCzke4KKa7"
                        },
                        { 
                            time: "12:00", 
                            name: "スープカレーの店 つくし Tsukushi", 
                            type: "food", 
                            note: "湯咖哩。有中文菜單",
                            link: "https://maps.app.goo.gl/ipcTnZdKknc5NAig6" 
                        },
                        { 
                            time: "13:30", 
                            name: "吹屋故鄉村", 
                            type: "sight", 
                            note: "參觀：松榮館、舊吹屋小學校、郵局",
                            link: "https://maps.app.goo.gl/DkasesLFCzke4KKa7",
                            tags: ["日本遺產", "紅銅色街道"],
                            customDetails: [
                                {
                                    label: "歷史簡介",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "吹屋故鄉村因盛產銅礦與氧化鐵顏料「弁柄」而繁榮，被稱為「日本紅的發祥地」。這裡的富商們為了打造統一的街景，特地聘請來自石州的宮大工，使用高品質的石州瓦與弁柄漆，建造了這片獨一無二的紅銅色街道。如今被選定為國家重要傳統的建造物群保存地區。"
                                },
                                {
                                    label: "必看景點：舊片山家住宅",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "江戶時代後期弁柄商人的豪宅，保存狀態極佳，可一窺當時富商的生活。",
                                    linkUrl: "https://maps.app.goo.gl/bz1zrRSYbHdgKYpCA"
                                },
                                {
                                    label: "必看景點：舊吹屋小學校",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "明治時代建造的木造校舍，擁有美麗的講堂與懷舊氛圍，是日本現存最古老的木造校舍之一。",
                                    linkUrl: "https://maps.app.goo.gl/amGWq6zkP7dbEm9k8"
                                },
                                {
                                    label: "必看景點：吹屋郵便局",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "保留了復古外觀的現役郵局，非常適合拍照留念。",
                                    linkUrl: "https://maps.app.goo.gl/v7YhxEEMAYQZaejB6"
                                }
                            ]
                        },
                        { 
                            time: "17:00", 
                            name: "高梁國際飯店", 
                            type: "hotel", 
                            note: "易遊網。含早餐"
                        }
                    ]
                },
                {
                    id: 8,
                    date: "12/05 (五)",
                    location: "備中松山城。倉敷美觀",
                    mainCity: "倉敷",
                    spots: [
                        { 
                            time: "06:00", 
                            name: "備中松山城展望台", 
                            type: "sight", 
                            tags: ["絕景", "雲海"], 
                            note: "早起看雲海日出！",
                            link: "https://maps.app.goo.gl/VPSM2Jo6dUXuq84X8",
                            customDetails: [
                                {
                                    label: "雲海預測",
                                    icon: <Icons.ExternalLink className="w-4 h-4" />,
                                    value: "出發前請確認當天雲海出現機率",
                                    linkUrl: "https://www.mitsubishi-motors.co.jp/special/weekend-explorer/unkai/18.html"
                                },
                                {
                                    label: "展望台地圖",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "查看雲海展望台周邊地圖 (PDF/圖片)",
                                    linkUrl: "https://takahasikanko.or.jp/uploads/fckeditor/uid000001_2025091813133292864352.jpg"
                                }
                            ]
                        },
                        { 
                            time: "08:00", 
                            name: "早餐：高梁國際飯店",
                            type: "food", 
                            note: "享用早餐後退房"
                        },
                        {
                            time: "09:00",
                            name: "高梁市觀光駐車場",
                            type: "transport",
                            note: "停車轉乘登山巴士，或步行上山",
                            link: "https://maps.app.goo.gl/uLcZ2Zvqu2taDD6p7",
                            tags: ["停車場"]
                        },
                        { 
                            time: "09:30", 
                            name: "備中高梁 散策", 
                            type: "sight", 
                            note: "建議購買三館共通券 (1000円)",
                            tags: ["共通券"],
                            customDetails: [
                                {
                                    label: "三館共通券",
                                    icon: <Icons.Wallet className="w-4 h-4" />,
                                    value: "售價 1000円。包含：備中松山城、武家屋敷（舊折井家・舊埴原家）、賴久寺。"
                                },
                                {
                                    label: "1. 武家屋敷 舊折井家",
                                    icon: <Icons.Navigation className="w-4 h-4" />,
                                    value: "江戶時代中期的武士住宅，庭園優美。",
                                    links: [
                                        { name: "導航至舊折井家", url: "https://maps.app.goo.gl/DssrT63yu5D3tuFC6" }
                                    ]
                                },
                                {
                                    label: "2. 武家屋敷 舊埴原家",
                                    icon: <Icons.Navigation className="w-4 h-4" />,
                                    value: "江戶時代後期的武士住宅，保留完整。",
                                    links: [
                                        { name: "導航至舊埴原家", url: "https://maps.app.goo.gl/8Xc3vP4pQARh55Cy9" }
                                    ]
                                },
                                {
                                    label: "3. 賴久寺庭園",
                                    icon: <Icons.Navigation className="w-4 h-4" />,
                                    value: "國家指定名勝庭園，由小堀遠州設計。",
                                    links: [
                                        { name: "導航至賴久寺", url: "https://maps.app.goo.gl/gkVFsVCpZL9Hegc56" }
                                    ]
                                },
                                {
                                    label: "4. 備中松山城",
                                    icon: <Icons.Navigation className="w-4 h-4" />,
                                    value: "日本現存十二天守之一，也是最高的山城。",
                                    links: [
                                        { name: "導航至松山城", url: "https://maps.app.goo.gl/J8DdkaXdKD53d2Wc8" }
                                    ]
                                }
                            ]
                        },
                        { 
                            time: "11:00", 
                            name: "備中松山城", 
                            type: "sight", 
                            note: "日本唯一仍保有天守閣的山城", 
                            link: "https://maps.app.goo.gl/8XqZ1v8e9r8q9q8q7",
                            tags: ["百名城", "貓城主"],
                            customDetails: [
                                {
                                    label: "貓城主三十郎",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "這裡有著名的貓城主「三十郎」，運氣好的話可以遇到他巡視領地喔！",
                                    links: [
                                        { name: "貓城主IG", url: "https://www.instagram.com/sanju_ro_?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" }
                                    ]
                                },
                                {
                                    label: "印章活動",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "有明信片印章活動，蓋印沒有順序，可以在參觀過程中收集。"
                                }
                            ]
                        },
                        { 
                            time: "12:30", 
                            name: "高梁午餐推薦", 
                            type: "food", 
                            note: "嘗試當地B級美食「印度番茄炒麵」",
                            tags: ["特色美食"],
                            subSpots: [
                                { 
                                    name: "五万石 (Goman-goku)", 
                                    note: "印度番茄炒麵創始店", 
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Gomangoku+Takahashi"
                                },
                                { 
                                    name: "星巴克 蔦屋書店高梁市圖書館店", 
                                    note: "最美圖書館，適合輕食休憩", 
                                    type: "coffee",
                                    link: "https://maps.app.goo.gl/bVUqFZLL7xRHajnVA"
                                }
                            ]
                        },
                        { 
                            time: "13:30", 
                            name: "倉敷美觀地區", 
                            type: "sight", 
                            note: "白壁宅邸與倉敷川",
                            tags: ["天領", "白壁屋敷"],
                            customDetails: [
                                {
                                    label: "美食・購物筆記",
                                    icon: <Icons.Wallet className="w-4 h-4" />,
                                    value: "美食・購物筆記",
                                    highlight: true
                                },
                                {
                                    label: "蟲文庫",
                                    value: "古民家獨立書店",
                                    linkUrl: "https://maps.app.goo.gl/rfmo9BQUQkAq42UV6"
                                },
                                {
                                    label: "★ 倉敷館觀光案內所",
                                    value: "提供旅遊資訊與休憩",
                                    linkUrl: "https://maps.app.goo.gl/zw2imA7XaXf1kDwLA"
                                },
                                {
                                    label: "炭珈琲三村",
                                    value: "自家烘焙咖啡",
                                    linkUrl: "https://maps.app.goo.gl/U4h1sXSZ9w8nfTt1A"
                                },
                                {
                                    label: "倉敷 SOLA",
                                    value: "複合式商業設施 (牛仔布、雜貨)",
                                    linkUrl: "https://maps.app.goo.gl/BNKKsPG2uCYntmPx6"
                                },
                                {
                                    label: "町家喫茶 三宅商店",
                                    value: "咖哩飯、甜點、咖啡與冰品",
                                    linkUrl: "https://maps.app.goo.gl/Qq66a9LevLf4jjtm6"
                                },
                                {
                                    label: "TANE×612 FACTORY",
                                    value: "紙膠帶專賣店",
                                    linkUrl: "https://maps.app.goo.gl/bZB7T3yUHa7RMPXx6"
                                },
                                {
                                    label: "林源十郎商店",
                                    value: "設計雜貨與生活選物",
                                    linkUrl: "https://maps.app.goo.gl/KJ8qEhYmkmFQtqoZ7"
                                },
                                {
                                    label: "歷史背景",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "倉敷美觀地區在江戶時代初期成為幕府的直轄地（天領），設有代官所，作為備中國南部的物資集散地而繁榮。倉敷川沿岸林立著許多白壁土藏（倉庫）與屋敷，至今仍保留了當時的風貌。1979年被列為國家重要傳統的建造物群保存地區。"
                                },
                                {
                                    label: "代表景觀",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "倉敷川兩岸的柳樹街道、白壁黑瓦的倉庫群，以及穿梭其間的小船（川舟流し），構成了倉敷最具代表性的風景。這裡融合了江戶時代的傳統建築與明治之後的西洋風格，展現了獨特的文化魅力。"
                                }
                            ]
                        },
                        { 
                            time: "17:00", 
                            name: "滔々 民藝館南 (Toutou)", 
                            type: "hotel", 
                            tags: ["特色住宿"], 
                            note: "官網預訂",
                            link: "https://maps.app.goo.gl/iZwVJmsQDPGpExkp9"
                        },
                        {
                            time: "18:30",
                            name: "倉敷美觀地區晚餐推薦",
                            type: "food",
                            tags: ["老屋晚餐", "居酒屋", "鄉土料理"],
                            note: "點擊查看三間精選餐廳 (高田屋 / 新粹 / 富久屋)",
                            customDetails: [
                                {
                                    label: "1. 高田屋 (Takata-ya)",
                                    icon: <Icons.Utensils className="w-4 h-4" />,
                                    value: "【風格】經典老舖居酒屋\n【推薦理由】倉敷最有名的排隊名店！町家老屋建築充滿歷史感，氣氛熱鬧。必吃炭火串燒與鰆魚刺身。",
                                    links: [
                                        { name: "地圖導航", url: "https://www.google.com/maps/search/?api=1&query=Takataya+Kurashiki" }
                                    ]
                                },
                                {
                                    label: "2. 民藝茶屋 新粹 (Shinsui)",
                                    icon: <Icons.Utensils className="w-4 h-4" />,
                                    value: "【風格】關東煮與日本酒\n【推薦理由】掛著紅燈籠的溫暖小店。12月的夜晚最適合圍著吧台吃熱騰騰的關東煮配地酒，暖胃首選。",
                                    links: [
                                        { name: "地圖導航", url: "https://www.google.com/maps/search/?api=1&query=Mingei+Chaya+Shinsui+Kurashiki" }
                                    ]
                                },
                                {
                                    label: "3. 富久屋 本館 (Fukuya)",
                                    icon: <Icons.Utensils className="w-4 h-4" />,
                                    value: "【風格】道地鄉土料理\n【推薦理由】想一次吃到所有岡山名產（如散壽司、Mamakari）就來這裡。環境舒適，適合家庭或想好好吃套餐的人。",
                                    links: [
                                        { name: "地圖導航", url: "https://www.google.com/maps/search/?api=1&query=Fukuya+Honkan+Kurashiki" }
                                    ]
                                }
                            ],
                            subSpots: [
                                {
                                    name: "高田屋 (燒鳥/居酒屋)",
                                    note: "排隊名店，氣氛熱鬧",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Takataya+Kurashiki"
                                },
                                {
                                    name: "民藝茶屋 新粹 (關東煮)",
                                    note: "溫暖小店，適合冬天",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Mingei+Chaya+Shinsui+Kurashiki"
                                },
                                {
                                    name: "富久屋 本館 (鄉土料理)",
                                    note: "岡山散壽司、Mamakari",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Fukuya+Honkan+Kurashiki"
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 9,
                    date: "12/06 (六)",
                    location: "倉敷。岡山",
                    mainCity: "岡山",
                    spots: [
                        {
                            time: "08:30",
                            name: "倉敷美觀地區逛逛",
                            type: "sight",
                            note: "早起拍照",
                            link: "https://maps.app.goo.gl/3d6nEfpG6aFwqd3q7"
                        },
                        { 
                            time: "09:30", 
                            name: "吉備津神社", 
                            type: "sight", 
                            note: "桃太郎傳說原型", 
                            tags: ["必去景點", "國寶"],
                            link: "https://maps.app.goo.gl/Nx4BAMYZdiCWCFjN9",
                            customDetails: [
                                {
                                    label: "必看重點",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "長達 360 公尺的木造迴廊，沿著山坡地形蜿蜒，非常壯觀，是拍照絕景。本殿與拜殿是日本唯一的「吉備津造」建築樣式，被指定為國寶。"
                                },
                                {
                                    label: "桃太郎傳說",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "這裡供奉的大吉備津彥命是桃太郎的原型，傳說中他在此擊退了名為「溫羅」的鬼。"
                                }
                            ]
                        },
                        { 
                            time: "12:00", 
                            name: "岡山市區午餐", 
                            type: "food", 
                            note: "品嚐岡山名物",
                            tags: ["午餐推薦"],
                            subSpots: [
                                {
                                    name: "味司 野村 (Nomura)",
                                    note: "多蜜醬豬排丼創始店，醬汁濃郁",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Ajitsukasa+Nomura+Okayama"
                                },
                                {
                                    name: "おまち堂 & FRUTAS",
                                    note: "水果王國必吃水果聖代 (輕食)",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Omachido+Frutas+Okayama"
                                }
                            ]
                        },
                        { 
                            time: "13:30", 
                            name: "岡山城。烏城",
                            type: "sight", 
                            note: "黑色外牆的帥氣城堡",
                            tags: ["解謎活動"],
                            link: "https://maps.app.goo.gl/8XqZ1v8e9r8q9q8q7",
                            customDetails: [
                                {
                                    label: "歷史介紹",
                                    icon: <Icons.BookOpen className="w-4 h-4" />,
                                    value: "岡山城由豐臣秀吉的家臣宇喜多秀家於1597年建造。不同於姬路城的白色，岡山城的外牆覆蓋著塗有黑漆的下見板，因此被稱為「烏城」。其不等邊五角形的天守台也是一大特色。雖然天守在二戰中被燒毀，但後來進行了重建，內部展示了豐富的歷史資料。"
                                },
                                {
                                    label: "歷史偵探解謎",
                                    icon: <Icons.Info className="w-4 h-4" />,
                                    value: "參加「歷史偵探與烏城之謎」活動，解開隱藏在城內的謎題。",
                                    linkUrl: "https://okayama-castle-nazotokimystery.jp"
                                }
                            ]
                        },
                        { 
                            time: "15:30", 
                            name: "岡山後樂園", 
                            type: "sight", 
                            note: "日本三大名園之一",
                            tags: ["必去景點"],
                            link: "https://maps.app.goo.gl/8XqZ1v8e9r8q9q8q7",
                            customDetails: [
                                {
                                    label: "遊覽建議",
                                    icon: <Icons.Coffee className="w-4 h-4" />,
                                    value: "與岡山城相鄰，步行即可抵達。園區廣大優美，建議在園內的茶屋稍作休息，喝杯抹茶欣賞風景。"
                                },
                                {
                                    label: "夢二鄉土美術館",
                                    icon: <Icons.MapPin className="w-4 h-4" />,
                                    value: "位於後樂園旁，展示竹久夢二的作品。",
                                    linkUrl: "https://maps.app.goo.gl/8XqZ1v8e9r8q9q8q7"
                                }
                            ]
                        },
                        {
                            time: "16:00",
                            name: "還車",
                            type: "transport",
                            link: "https://maps.app.goo.gl/f69FQq2MkL8PD4Yz8",
                            note: "還車完步行至飯店check in"
                        },
                        { 
                            time: "18:00", 
                            name: "西川綠道公園 燈飾", 
                            type: "sight", 
                            note: "冬季限定燈飾活動",
                            tags: ["夜間景點"],
                            customDetails: [
                                {
                                    label: "活動介紹",
                                    icon: <Icons.Star className="w-4 h-4" />,
                                    value: "在岡山市中心南北流淌的西川沿岸舉辦的冬季燈飾活動。從岡山車站附近的桃太郎大通到阿倉通，水邊閃耀著五彩繽紛的燈飾，還有高達4公尺的聖誕樹登場，營造出光輝閃爍的星月夜世界。"
                                }
                            ]
                        },
                        { 
                            time: "20:00", 
                            name: "三井花園飯店岡山", 
                            type: "hotel", 
                            note: "Booking。含早餐。頂樓有大浴場",
                            link: "https://maps.app.goo.gl/M3RZ3kGVDLFREqs67"
                        }
                    ]
                },
                {
                    id: 10,
                    date: "12/07 (日)",
                    location: "岡山。雙方案", // <-- Day 10 標題已更新
                    mainCity: "岡山",
                    spots: [
                        {
                            time: "09:00",
                            name: "方案選擇",
                            type: "transport",
                            note: "請依當日體力與喜好選擇方案 A 或 B",
                            tags: ["自由行"]
                        },
                        { 
                            time: "A", 
                            name: "方案 A：瀨戶內海與丹寧", 
                            type: "sight", 
                            note: "適合喜歡工藝、看海的人",
                            subSpots: [
                                {
                                    name: "兒島牛仔褲街",
                                    note: "日本牛仔褲發源地 (車程約50分)",
                                    type: "shop",
                                    link: "https://www.google.com/maps/search/?api=1&query=Kojima+Jeans+Street"
                                },
                                {
                                    name: "鷲羽山展望台",
                                    note: "眺望瀨戶大橋與夕陽絕景",
                                    type: "sight",
                                    link: "https://www.google.com/maps/search/?api=1&query=Washuzan+Observatory"
                                }
                            ]
                        },
                        { 
                            time: "B", 
                            name: "方案 B：電車慢活。市區散策", 
                            type: "sight", 
                            note: "搭乘可愛的路面電車，漫步新舊交融的街區",
                            tags: ["路面電車", "文青散步"],
                            customDetails: [
                                {
                                    label: "體驗路面電車 (岡電)",
                                    icon: <Icons.Car className="w-4 h-4" />,
                                    value: "從「岡山站前」搭乘至「城下站」或「縣廳通站」。運氣好的話可以搭到知名設計師水戶岡銳治設計的「MOMO號」或全黑帥氣的「KURO號」。",
                                    links: [
                                        { name: "時刻表與路線", url: "https://okayama-kido.co.jp/tramway/" }
                                    ]
                                },
                                {
                                    label: "必逛：HARE MACHI 特區 365",
                                    icon: <Icons.Wallet className="w-4 h-4" />,
                                    value: "位於 AEON Mall 岡山 1F/2F 的「ハレマチ特区365」。這裡集合了岡山所有的設計工藝品（倉敷帆布、兒島牛仔布、備前燒、紙膠帶），不用跑遠就能一次買齊最有質感的伴手禮。",
                                    links: [
                                        { name: "官網介紹", url: "https://hare365.com/" }
                                    ]
                                }
                            ],
                            subSpots: [
                                {
                                    name: "岡山電氣軌道 (路面電車)",
                                    note: "岡山站前出發，體驗復古風情",
                                    type: "transport",
                                    link: "https://maps.app.goo.gl/kUSAfR1CxcaRrTFr9?g_st=ipc"
                                },
                                {
                                    name: "表町商店街 & 荷蘭通",
                                    note: "昭和拱廊街與文青咖啡店散策",
                                    type: "sight",
                                    link: "https://www.google.com/maps/search/?api=1&query=Omotecho+Shopping+Street+Okayama"
                                },
                                {
                                    name: "西川綠道公園",
                                    note: "午後沿著河岸散步回車站，舒適愜意",
                                    type: "sight",
                                    link: "https://maps.app.goo.gl/pdis5i1skmV5k5FM7?g_st=ipc"
                                },
                                {
                                    name: "AEON Mall 岡山",
                                    note: "西日本旗艦店，必逛 HARE MACHI",
                                    type: "shop",
                                    link: "https://www.google.com/maps/search/?api=1&query=AEON+MALL+Okayama"
                                }
                            ]
                        },
                        {
                            time: "12:30",
                            name: "午餐推薦",
                            type: "food",
                            note: "依方案選擇 (點擊導航)",
                            subSpots: [
                                {
                                    name: "(A) 兒島海鮮",
                                    note: "當地著名的章魚料理",
                                    type: "food"
                                },
                                {
                                    name: "(B) 食堂 やまと (Yamato)",
                                    note: "在地排隊名店！多蜜醬豬排丼+拉麵",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Shokudo+Yamato+Okayama"
                                },
                                {
                                    name: "(B) 小豆島拉麵 HISHIO",
                                    note: "岡山站前店，湯頭濃郁，無限替玉",
                                    type: "food",
                                    link: "https://www.google.com/maps/search/?api=1&query=Shodoshima+Ramen+HISHIO+Okayama"
                                }
                            ]
                        },
                        {
                            time: "備註",
                            name: "必買伴手禮清單",
                            type: "shop",
                            note: "最後衝刺參考",
                            customDetails: [
                                { 
                                    label: "大手饅頭", 
                                    value: "岡山人最愛，薄皮紅豆餡",
                                    imageUrl: "https://www.japaholic.com/storage/uploads/2025/07/09//item_pic01_1752049951.png",
                                    links: [
                                        { name: "岡山店", url: "https://maps.app.goo.gl/tv3XaPVK9XZ6uNLS8" },
                                        { name: "倉敷店", url: "https://maps.app.goo.gl/aMbwNjsGfeLj29rn8" }
                                    ]
                                },
                                { 
                                    label: "吉備糰子", 
                                    value: "廣榮堂五味太郎包裝超可愛",
                                    imageUrl: "https://www.japaholic.com/storage/uploads/2025/07/09//main_img_1752047813.jpg",
                                    links: [
                                        { name: "さんすて岡山店", url: "https://maps.app.goo.gl/ZVJBd6uDLcwqZmBx9" }
                                    ]
                                },
                                { 
                                    label: "瀨戶內壽　白桃起司岡山貓舌餅乾", 
                                    value: "瀨戶內壽推出白桃起司夾心餅乾，結合岡山白桃與蒜山高原傑西牛乳，酥脆貓舌餅夾層奶餡，甜鹹交織，清爽不膩。很多地方都有賣",
                                    imageUrl: "https://www.japaholic.com/storage/uploads/2025/07/09//23_1223_01_1752051607.jpg"
                                },
                                { label: "倉敷意匠/mt", value: "限定款紙膠帶 (AEON文具區)" },
                                { 
                                    label: "岡山白桃果凍", 
                                    value: "白桃/葡萄罐頭或果凍",
                                    imageUrl: "https://www.japaholic.com/storage/uploads/2025/07/13//1488261669_ebe360c4ee2f6a2367be8b3599378c72b5d31ff4_1752392636.jpg",
                                    links: [
                                        { name: "清風庵", url: "https://maps.app.goo.gl/7CWeUh4eKjVVD1hP8" }
                                    ]
                                },
                                { 
                                    label: "中川政七/Hare Machi", 
                                    value: "AEON內的質感選物店",
                                    links: [
                                        { name: "永旺夢樂城 岡山 2F", url: "https://maps.app.goo.gl/oRU3NAjV4Xv1vzsBA" }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 11,
                    date: "12/08 (一)",
                    location: "岡山 ➔ 返程",
                    mainCity: "岡山",
                    spots: [
                        { 
                            time: "09:00", 
                            name: "悠閒早餐 & Check-out", 
                            type: "food", 
                            note: "整理行李，準備返程" 
                        },
                        { 
                            time: "10:30", 
                            name: "最後補漏", 
                            type: "shop", 
                            note: "郵局寄明信片、Bic Camera、AEON補貨",
                            subSpots: [
                                {
                                    name: "岡山中央郵便局",
                                    note: "寄出旅途回憶",
                                    type: "shop",
                                    link: "https://www.google.com/maps/search/?api=1&query=Okayama+Central+Post+Office"
                                },
                                {
                                    name: "Bic Camera",
                                    note: "車站對面，電器補貨",
                                    type: "shop",
                                    link: "https://www.google.com/maps/search/?api=1&query=Bic+Camera+Okayama"
                                }
                            ]
                        },
                        { 
                            time: "12:30", 
                            name: "前往機場", 
                            type: "transport", 
                            note: "搭乘機場巴士前往岡山機場 (約30分)",
                            tags: ["平安回家"]
                        },
                        { 
                            time: "14:00", 
                            name: "機場報到", 
                            type: "plane", 
                            note: "IT263 17:55 起飛。免稅店可買吉備糰子、大手饅頭",
                        }
                    ]
                }
            ],
            accommodations: [
                { name: "THE SHIROYAMA TERRACE 津山別邸", dates: "11/28-29", phone: "0868-24-2111", address: "岡山県津山市山下30-1" },
                { name: "さぎの湯荘 Saginoyusou", dates: "11/30", phone: "0854-28-6211", address: "島根県安来市古川町478-1" },
                { name: "星野集團 界 玉造", dates: "12/01", phone: "050-3134-8092", address: "島根県松江市玉湯町玉造1237" },
                { name: "Centurion Hotel Izumo", dates: "12/02-03", phone: "0853-21-8050", address: "島根県出雲市今市町2081" },
                { name: "高梁國際飯店", dates: "12/04", phone: "0866-21-0080", address: "岡山県高梁市正宗町2033" },
                { name: "滔々 Toutou (倉敷)", dates: "12/05", phone: "086-422-0005", address: "岡山県倉敷市中央1-4-16" },
                { name: "三井花園飯店岡山", dates: "12/06-07", phone: "086-235-1131", address: "岡山市北区駅元町1-7" }
            ],
        };

        // --- Mock Weather API (Fallback) ---
        // 恢復模擬資料作為備案，以防 API Key 未生效或查詢失敗
        const mockWeatherResponses = {
            "津山": { weather: "cloudy", temp: "5°C / 14°C" },
            "安來": { weather: "rain", temp: "4°C / 11°C" },
            "玉造": { weather: "cloudy", temp: "6°C / 13°C" },
            "松江": { weather: "sunny", temp: "7°C / 15°C" },
            "出雲": { weather: "cloudy", temp: "5°C / 12°C" },
            "高梁": { weather: "sunny", temp: "3°C / 11°C" },
            "倉敷": { weather: "sunny", temp: "2°C / 12°C" },
            "岡山": { weather: "sunny", temp: "8°C / 16°C" },
        };

        // --- 城市坐標 (City Coordinates) ---
        const CITY_COORDINATES = {
            "津山": { lat: 35.064, lon: 134.004 },    // 津山市
            "安來": { lat: 35.428, lon: 133.250 },    // 安來市
            "玉造": { lat: 35.430, lon: 133.010 },    // 松江市玉湯町 (玉造溫泉附近)
            "松江": { lat: 35.474, lon: 133.050 },    // 松江市
            "出雲": { lat: 35.367, lon: 132.767 },    // 出雲市
            "高梁": { lat: 34.808, lon: 133.627 },    // 高梁市
            "倉敷": { lat: 34.597, lon: 133.774 },    // 倉敷市
            "岡山": { lat: 34.661, lon: 133.921 },    // 岡山市
        };

        // --- OpenWeatherMap API 呼叫 ---
        const API_KEY = "125cba2c2cfeff7d99133ca1c7ff66a0"; 
        const WEATHER_BASE_URL = "https://api.openweathermap.org/data/2.5/weather";

        /**
         * 將 OpenWeatherMap 天氣代碼轉換為圖示和文字
         */
        const mapWeatherCode = (code) => {
            if (code >= 200 && code < 300) return { type: 'rain', description: '雷雨' };
            if (code >= 300 && code < 500) return { type: 'rain', description: '細雨' };
            if (code >= 500 && code < 600) return { type: 'rain', description: '雨' };
            if (code >= 600 && code < 700) return { type: 'cloudy', description: '雪' };
            if (code >= 700 && code < 800) return { type: 'cloudy', description: '霧/霾' };
            if (code === 800) return { type: 'sunny', description: '晴朗' };
            if (code >= 801 && code < 805) return { type: 'cloudy', description: '多雲' };
            return { type: 'unknown', description: 'N/A' };
        };

        /**
         * 呼叫 OpenWeatherMap API 取得城市天氣，失敗則使用 Mock Data
         */
        const fetchWeatherByCity = async (city) => {
            const coords = CITY_COORDINATES[city];
            
            if (!coords || API_KEY === "YOUR_OPENWEATHERMAP_API_KEY" || API_KEY === "") {
                const mock = mockWeatherResponses[city];
                return mock ? { ...mock, error: 'Config Error (Using Mock)' } : { weather: 'unknown', temp: 'N/A', error: 'Config Error' };
            }

            const url = `${WEATHER_BASE_URL}?lat=${coords.lat}&lon=${coords.lon}&appid=${API_KEY}&units=metric&lang=zh_tw`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`API error: ${response.statusText}`);
                }
                const data = await response.json();
                
                const temp = data.main.temp ? `${Math.round(data.main.temp)}°C` : 'N/A';
                const weatherCode = data.weather[0]?.id;
                const { type, description } = mapWeatherCode(weatherCode);

                return { 
                    weather: type, 
                    temp: temp,
                    description: description,
                    error: null
                };
            } catch (error) {
                console.error(`Fetching weather for ${city} failed:`, error);
                // Fallback to mock data on error (e.g. 401 Unauthorized)
                const mock = mockWeatherResponses[city];
                if (mock) {
                    return { ...mock, error: 'API Error (Using Mock)' };
                }
                return { 
                    weather: 'unknown', 
                    temp: 'N/A', 
                    error: `天氣查詢失敗: ${error.message}` 
                };
            }
        };

        // --- Components ---

        const WeatherBadge = ({ type, temp, simple = false, error }) => {
            const iconClass = simple ? "w-4 h-4 mr-1" : "w-5 h-5 mr-1";
            let icon;
            let label = "載入中...";
            
            if (error) {
                const isConfigError = error.includes('Config Error');
                icon = <Icons.Info className={`${iconClass} text-[#BC412B]`} />;
                label = isConfigError ? 'N/A' : '錯誤';
                return (
                    <div className={`flex items-center font-serif ${simple ? 'text-xs text-[#BC412B]' : 'bg-[#fceceb] px-3 py-1 rounded-sm shadow-sm border border-[#e8d2cf] text-sm text-[#BC412B]'}`} title={error}>
                        {icon}
                        <span>{simple ? '天氣 N/A' : '天氣載入失敗'}</span>
                    </div>
                );
            }

            switch (type) {
                case 'sunny':
                    icon = <Icons.Sun className={`${iconClass} text-[#BC412B]`} />;
                    label = "晴";
                    break;
                case 'cloudy':
                    icon = <Icons.CloudSun className={`${iconClass} text-stone-500`} />;
                    label = "曇";
                    break;
                case 'rain':
                    icon = <Icons.CloudRain className={`${iconClass} text-[#2E4B71]`} />;
                    label = "雨";
                    break;
                case 'unknown':
                case 'loading':
                    icon = <Icons.Clock className={`${iconClass} text-[#D7C4BB] animate-pulse`} />;
                    label = "載入中...";
                    break;
                default:
                    icon = <Icons.Info className={`${iconClass} text-[#D7C4BB]`} />;
                    label = "不明";
            }

            return (
                <div className={`flex items-center font-serif ${simple ? 'text-xs text-stone-500' : 'bg-[#f8f7f2] px-3 py-1 rounded-sm shadow-sm border border-[#e0d8cf] text-sm text-stone-700'}`}>
                    {icon}
                    <span>{simple ? temp : `${label} ${temp}`}</span>
                </div>
            );
        };

        const Tag = ({ text }) => {
            let colorClass = "bg-[#ebe8e1] text-stone-600 border-[#dcd6cc]";
            if (text.includes("必吃")) colorClass = "bg-[#fceceb] text-[#BC412B] border-[#e8d2cf]";
            if (text.includes("必買")) colorClass = "bg-[#f5eef5] text-[#8e448e] border-[#e2d5e2]";
            if (text.includes("重要") || text.includes("國寶")) colorClass = "bg-[#BC412B] text-white border-[#BC412B]";
            if (text.includes("攻略") || text.includes("點擊") || text.includes("查看") || text.includes("冷知識") || text.includes("詳細") || text.includes("豆知識") || text.includes("天領") || text.includes("白壁")) colorClass = "bg-[#eaf0f6] text-[#2E4B71] border-[#d4dde8]";

            return (
                <span className={`text-[11px] px-2 py-0.5 rounded-sm mr-2 mb-1 inline-block font-serif border ${colorClass}`}>
                    {text}
                </span>
            );
        };

        const SpotCard = ({ spot, onClick }) => {
            const hasSubSpots = (spot.subSpots && spot.subSpots.length > 0) || (spot.customDetails && spot.customDetails.length > 0);

            const getIcon = (type) => {
                switch (type) {
                    case 'food': return <Icons.Utensils className="w-4 h-4 text-[#BC412B]" />;
                    case 'coffee': return <Icons.Coffee className="w-4 h-4 text-[#8F5A3C]" />;
                    case 'hotel': return <Icons.BedDouble className="w-4 h-4 text-[#2E4B71]" />;
                    case 'transport': return <Icons.Car className="w-4 h-4 text-[#5F7146]" />;
                    case 'shop': return <Icons.Wallet className="w-4 h-4 text-[#8e448e]" />;
                    default: return <Icons.Camera className="w-4 h-4 text-[#5F7146]" />;
                }
            };

            const handleNavClick = (e) => {
                e.stopPropagation();
                const url = spot.link ? spot.link : `https://www.google.com/maps/search/?api=1&query=${spot.name}`;
                window.open(url, '_blank');
            };

            return (
                <div 
                    className={`ml-4 mb-8 relative pl-6 border-l border-[#e0d8cf] last:mb-0 last:border-l-0 font-serif 
                        ${hasSubSpots ? 'cursor-pointer group' : ''}`}
                    onClick={hasSubSpots ? onClick : undefined}
                >
                    <div className={`absolute -left-[9px] top-0 bg-[#fcfaf2] border rounded-full p-1.5 transition-colors shadow-sm 
                        ${hasSubSpots ? 'border-[#2E4B71] group-hover:bg-[#eaf0f6]' : 'border-[#dcd6cc]'}`}>
                        {getIcon(spot.type)}
                    </div>

                    <div className="flex justify-between items-start mb-1">
                        <div>
                            <span className="text-xs font-bold text-[#2E4B71] block mb-1 tracking-wider">{spot.time}</span>
                            <div className="flex items-center">
                                <h3 className="text-lg font-bold text-[#2b2b2b] leading-tight mr-2 tracking-wide">{spot.name}</h3>
                                {hasSubSpots && <Icons.ChevronRight className="w-4 h-4 text-[#2E4B71] opacity-60" />}
                            </div>
                        </div>
                        {!spot.hideNav && (
                            <button 
                                onClick={handleNavClick}
                                className="bg-[#f8f7f2] border border-[#e0d8cf] text-[#2E4B71] p-2 rounded-full active:scale-95 transition-transform shadow-sm"
                                aria-label="導航"
                            >
                                <Icons.Navigation className="w-3.5 h-3.5" />
                            </button>
                        )}
                    </div>

                    <div className="flex flex-wrap mb-1">
                        {spot.tags && spot.tags.map(tag => <Tag key={tag} text={tag} />)}
                    </div>

                    {spot.note && (
                        <p className="text-sm text-[#595959] mb-3 leading-loose">{spot.note}</p>
                    )}

                    {spot.stories && (
                        <div className="mt-4 bg-[#fdfdfb] p-4 rounded-sm border-t-2 border-b-2 border-[#e6e2d8] relative">
                            <div className="absolute top-0 right-0 p-2 opacity-5">
                                <Icons.Flower2 className="w-16 h-16" />
                            </div>
                            <h4 className="text-xs font-bold text-[#8F5A3C] mb-2 flex items-center tracking-widest border-b border-[#e6e2d8] pb-1 w-fit">
                                旅人手札
                            </h4>
                            {spot.stories.map((story, idx) => (
                                <p key={idx} className="text-xs text-[#6e6e6e] leading-7 tracking-wide text-justify">
                                    {story}
                                </p>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        const DayOverviewCard = ({ day, onClick, weatherInfo }) => {
            const { weather, temp, error } = weatherInfo || { weather: 'loading', temp: '...' };

            return (
                <button 
                    onClick={onClick}
                    className="bg-white p-4 rounded-lg shadow-sm border border-[#e0d8cf] flex flex-col items-start w-full text-left transition-all active:scale-95 hover:shadow-md hover:border-[#2E4B71] relative overflow-hidden group font-serif fade-in"
                >
                    <div className="absolute top-0 right-0 w-12 h-12 bg-[#eaf0f6] rounded-bl-[30px] -mr-6 -mt-6 transition-transform group-hover:scale-110"></div>
                    
                    <div className="flex items-center justify-between w-full mb-3 z-10">
                        <div className="bg-[#2E4B71] text-[#fcfaf2] w-8 h-8 rounded-md flex items-center justify-center text-sm font-medium shadow-sm">
                            {day.id}
                        </div>
                        <WeatherBadge type={weather} temp={temp} simple={true} error={error} />
                    </div>
                    
                    <div className="z-10 w-full">
                        <h3 className="font-bold text-[#2b2b2b] text-base mb-1 tracking-wider">{day.date}</h3>
                        <p className="text-xs text-[#6e6e6e] border-t border-[#e0d8cf] pt-2 mt-1 w-full flex items-center">
                            <Icons.MapPin className="w-3 h-3 mr-1" />{day.location}
                        </p>
                    </div>
                </button>
            );
        };

        const DetailHeader = ({ title, subtitle, onBack }) => (
            <div className="sticky top-0 z-40 bg-[#fcfaf2]/95 backdrop-blur-md border-b border-[#e0d8cf] px-4 py-4 mb-6 flex items-center justify-between shadow-sm">
                <button 
                    onClick={onBack}
                    className="flex items-center text-[#2E4B71] text-sm font-medium p-1 pr-3 rounded hover:bg-[#eaf0f6] transition-colors"
                >
                    <Icons.ChevronLeft className="w-5 h-5 mr-1" />
                    <span className="font-serif">戻る</span>
                </button>
                <div className="text-center">
                    {subtitle && <div className="text-[10px] text-[#8e8e8e] font-bold uppercase tracking-widest mb-0.5">{subtitle}</div>}
                    <div className="text-sm font-bold text-[#2b2b2b] font-serif tracking-wide">{title}</div>
                </div>
                <div className="w-16"></div> 
            </div>
        );

        const SpotDetailView = ({ spot, onBack }) => {
            useEffect(() => { window.scrollTo(0, 0); }, []);

            return (
                <div className="pb-24 min-h-screen bg-[#fcfaf2] fade-in">
                    <DetailHeader title={spot.name} onBack={onBack} />

                    {spot.customDetails && (
                        <div className="px-4">
                            <div className="bg-white rounded-lg shadow-sm border border-[#e0d8cf] p-5 mb-4 relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-1 bg-[#2E4B71]"></div>
                                <div className="flex items-center mb-5 text-[#2E4B71] font-bold border-b border-[#e0d8cf] pb-3 font-serif">
                                    <Icons.FileText className="w-5 h-5 mr-2" />
                                    詳細
                                </div>
                                
                                <div className="space-y-5 font-serif">
                                    {spot.customDetails.map((item, idx) => (
                                        <div key={idx} className="flex flex-col border-b border-dashed border-[#e0d8cf] pb-4 last:border-b-0 last:pb-0">
                                            <div className="flex items-center text-lg text-[#2b2b2b] font-bold mb-2">
                                                {item.icon && <span className="mr-2 text-[#2E4B71]">{item.icon}</span>}
                                                {item.label}
                                            </div>
                                            <div className={`text-xs text-[#6e6e6e] whitespace-pre-wrap leading-relaxed ${item.highlight ? 'font-bold text-[#BC412B] text-base' : ''}`}>
                                                {item.value}
                                            </div>
                                            
                                            {item.isAddress && (
                                                <button 
                                                    onClick={() => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.value.split('\n')[2] || item.value)}`, '_blank')}
                                                    className="mt-3 text-xs bg-[#eaf0f6] text-[#2E4B71] py-1.5 px-3 rounded-sm self-start flex items-center border border-[#d4dde8]"
                                                >
                                                    <Icons.Navigation className="w-3 h-3 mr-1" /> ナビ開始
                                                </button>
                                            )}

                                            {item.linkUrl && (
                                                <button 
                                                    onClick={() => window.open(item.linkUrl, '_blank')}
                                                    className="mt-3 text-xs text-[#2E4B71] hover:text-[#BC412B] flex items-center underline underline-offset-4"
                                                >
                                                    <Icons.ExternalLink className="w-3 h-3 mr-1" /> {item.linkText || '連結へ移動'}
                                                </button>
                                            )}

                                            <div className="flex flex-wrap gap-3 mt-3">
                                                {item.links && item.links.map((link, lIdx) => (
                                                    <button 
                                                        key={lIdx}
                                                        onClick={() => window.open(link.url, '_blank')}
                                                        className="text-xs bg-[#eaf0f6] text-[#2E4B71] py-1.5 px-3 rounded-sm flex items-center border border-[#d4dde8] hover:bg-[#dce5ef]"
                                                    >
                                                        <Icons.MapPin className="w-3 h-3 mr-1" /> {link.name}
                                                    </button>
                                                ))}
                                                
                                                {item.imageUrl && (
                                                    <button 
                                                        onClick={() => window.open(item.imageUrl, '_blank')}
                                                        className="text-xs bg-[#fff0f5] text-[#db2777] py-1.5 px-3 rounded-sm flex items-center border border-[#fbcfe8] hover:bg-[#fce7f3]"
                                                    >
                                                        <Icons.Image className="w-3 h-3 mr-1" /> 商品写真
                                                    </button>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {spot.subSpots && (
                        <div className="px-4">
                            <div className="bg-white rounded-lg shadow-sm border border-[#e0d8cf] p-5 mb-4 relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-1 bg-[#BC412B]"></div>
                                <div className="flex items-center mb-5 text-[#BC412B] font-bold border-b border-[#e0d8cf] pb-3 font-serif">
                                    <Icons.Utensils className="w-5 h-5 mr-2" />
                                    推薦清單
                                </div>
                                
                                <div className="space-y-4">
                                    {spot.subSpots.map((sub, idx) => (
                                        <div key={idx} className="flex items-start justify-between bg-[#fcfaf2] p-4 rounded-sm border border-[#e0d8cf]">
                                            <div className="flex items-start">
                                                <div className="bg-white text-[#2E4B71] w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border border-[#e0d8cf] mr-3 shadow-sm mt-0.5 font-serif">
                                                    {idx + 1}
                                                </div>
                                                <div>
                                                    <h4 className="font-bold text-[#2b2b2b] font-serif">{sub.name}</h4>
                                                    <p className="text-xs text-[#6e6e6e] mt-1 font-serif">{sub.note}</p>
                                                </div>
                                            </div>
                                            <button 
                                                onClick={() => window.open(sub.link, '_blank')}
                                                className="bg-[#2E4B71] text-white p-2 rounded-full shadow-md active:scale-95 transition-transform"
                                                aria-label="導航"
                                            >
                                                <Icons.Navigation className="w-3.5 h-3.5" />
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Back Button */}
                    <div className="mt-6 mb-8 text-center">
                        <button 
                            onClick={onBack}
                            className="inline-flex items-center text-[#2E4B71] text-sm font-serif border border-[#e0d8cf] px-6 py-2.5 rounded-full hover:bg-[#eaf0f6] transition-colors shadow-sm bg-white"
                        >
                            <Icons.ArrowLeft className="w-4 h-4 mr-2" />
                            返回當日行程
                        </button>
                    </div>
                </div>
            );
        };

        const DayDetailView = ({ day, onBack, weatherInfo }) => {
            const [selectedSpot, setSelectedSpot] = useState(null);

            useEffect(() => { window.scrollTo(0, 0); }, [day]);
            
            if (selectedSpot) {
                return <SpotDetailView spot={selectedSpot} onBack={() => setSelectedSpot(null)} />;
            }
            
            const { weather, temp, error } = weatherInfo || { weather: 'loading', temp: '...' };

            return (
                <div className="min-h-screen bg-[#fcfaf2] fade-in">
                    <DetailHeader title={day.date} subtitle={`DAY ${day.id}`} onBack={onBack} />

                    <div className="px-4 pb-24">
                        <div className="bg-white rounded-lg shadow-sm border border-[#e0d8cf] p-5 mb-6 relative">
                            <div className="flex items-center justify-between mb-6 pb-4 border-b border-[#e0d8cf]">
                                <div className="flex items-center text-[#2b2b2b] font-bold font-serif text-lg">
                                    <Icons.MapPin className="w-5 h-5 mr-2 text-[#2E4B71]" />
                                    {day.location}
                                </div>
                                <WeatherBadge type={weather} temp={temp} error={error} /> 
                            </div>
                            
                            <div className="pt-2">
                                {day.spots.map((spot, index) => (
                                    <SpotCard 
                                        key={index} 
                                        spot={spot} 
                                        onClick={() => setSelectedSpot(spot)} 
                                    />
                                ))}
                            </div>
                        </div>

                        {/* Back Button */}
                        <div className="mt-6 mb-8 text-center">
                            <button 
                                onClick={onBack}
                                className="inline-flex items-center text-[#2E4B71] text-sm font-serif border border-[#e0d8cf] px-6 py-2.5 rounded-full hover:bg-[#eaf0f6] transition-colors shadow-sm bg-white"
                            >
                                <Icons.ArrowLeft className="w-4 h-4 mr-2" />
                                返回日程總覽
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const ToolsSection = () => {
            return (
                <div className="pb-24 px-4 pt-6 font-serif fade-in">
                    <div className="grid grid-cols-2 gap-4 mb-8">
                        <div className="bg-white p-4 rounded-lg shadow-sm border border-[#e0d8cf] flex flex-col items-center justify-center text-center relative overflow-hidden">
                            <div className="absolute top-0 w-full h-1 bg-[#2E4B71] opacity-50"></div>
                            <div className="text-sm font-bold text-[#2E4B71] mb-1">去程 IT262</div>
                            <div className="text-xs text-[#6e6e6e]">11/28 11:30</div>
                        </div>
                        <div className="bg-white p-4 rounded-lg shadow-sm border border-[#e0d8cf] flex flex-col items-center justify-center text-center relative overflow-hidden">
                            <div className="absolute top-0 w-full h-1 bg-[#BC412B] opacity-50"></div>
                            <div className="text-sm font-bold text-[#BC412B] mb-1">回程 IT263</div>
                            <div className="text-xs text-[#6e6e6e]">12/08 17:55</div>
                        </div>
                    </div>

                    <h3 className="text-lg font-bold text-[#2E4B71] mb-4 flex items-center border-l-4 border-[#2E4B71] pl-3">
                        宿泊リスト
                    </h3>
                    <div className="space-y-3 mb-10">
                        {tripData.accommodations.map((hotel, idx) => (
                            <div key={idx} className="bg-white p-4 rounded-md border border-[#e0d8cf] shadow-sm flex justify-between items-center">
                                <div>
                                    <h4 className="font-bold text-[#2b2b2b] text-sm tracking-wide">{hotel.name}</h4>
                                    <p className="text-xs text-[#8e8e8e] mt-1">{hotel.dates}・{hotel.address}</p>
                                </div>
                                <button onClick={() => window.open(`tel:${hotel.phone}`)} className="bg-[#fcfaf2] border border-[#e0d8cf] text-[#5F7146] p-2 rounded-full">
                                    <Icons.Phone className="w-4 h-4" />
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const ItineraryView = ({ weatherData }) => {
            const [selectedDay, setSelectedDay] = useState(null);

            if (selectedDay) {
                return <DayDetailView day={selectedDay} onBack={() => setSelectedDay(null)} weatherInfo={weatherData[selectedDay.id]} />;
            }

            return (
                <div className="pb-24 px-4 pt-6 font-serif">
                    <div className="grid grid-cols-2 gap-4">
                        {tripData.days.map((day) => (
                            <DayOverviewCard 
                                key={day.id} 
                                day={day} 
                                onClick={() => setSelectedDay(day)}
                                weatherInfo={weatherData[day.id]}
                            />
                        ))}
                    </div>
                    <div className="text-center text-xs text-[#a0a0a0] mt-8 mb-4 tracking-widest">
                        —— 日程を選択 ——
                    </div>
                </div>
            );
        };

        function App() {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [scrolled, setScrolled] = useState(false);
            const [weatherData, setWeatherData] = useState({});

            useEffect(() => {
                const handleScroll = () => { setScrolled(window.scrollY > 20); };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            useEffect(() => {
                const loadWeather = async () => {
                    const weatherPromises = tripData.days.map(day => 
                        fetchWeatherByCity(day.mainCity).then(result => ({ id: day.id, ...result }))
                    );
                    const results = await Promise.all(weatherPromises);
                    setWeatherData(results.reduce((acc, curr) => { 
                        // 使用城市名稱作為 key
                        acc[curr.id] = { 
                            weather: curr.weather, 
                            temp: curr.temp, 
                            error: curr.error,
                            description: curr.description
                        }; 
                        return acc; 
                    }, {}));
                };

                // 首次載入天氣
                loadWeather();

                // 設定定時更新 (例如每 30 分鐘更新一次，實際生產環境應調整)
                const intervalId = setInterval(loadWeather, 30 * 60 * 1000); 

                return () => clearInterval(intervalId); // 組件卸載時清除定時器
            }, []);

            return (
                <div className="min-h-screen bg-[#fcfaf2] font-sans text-[#2b2b2b]">
                    {/* Header */}
                    <header className={`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${scrolled ? 'bg-[#fcfaf2]/95 shadow-sm py-3 border-b border-[#e0d8cf]' : 'bg-transparent py-6'}`}>
                        <div className="max-w-md mx-auto px-5 flex justify-between items-end">
                            <div>
                                <h1 className={`font-bold text-[#2E4B71] transition-all font-serif tracking-widest ${scrolled ? 'text-lg' : 'text-2xl'}`}>
                                    {tripData.meta.title}
                                </h1>
                                {!scrolled && (
                                    <p className="text-xs text-[#8e8e8e] mt-2 flex items-center tracking-wider">
                                        <Icons.Calendar className="w-3 h-3 mr-1" /> {tripData.meta.dateRange}
                                    </p>
                                )}
                            </div>
                            <div className="text-right">
                                {!scrolled && <span className="text-[10px] bg-[#fceceb] text-[#BC412B] px-3 py-1 rounded-full border border-[#e8d2cf] tracking-widest">秋旅</span>}
                            </div>
                        </div>
                    </header>
                    
                    <div className="h-24"></div>

                    <main className="max-w-md mx-auto relative z-0">
                        {activeTab === 'itinerary' ? <ItineraryView weatherData={weatherData} /> : <ToolsSection />}
                    </main>

                    {/* Bottom Navigation */}
                    <nav className="fixed bottom-0 left-0 right-0 bg-[#fcfaf2] border-t border-[#e0d8cf] z-50 safe-bottom shadow-[0_-5px_20px_rgba(0,0,0,0.03)]">
                        <div className="max-w-md mx-auto flex justify-around items-center h-16">
                            <button 
                                onClick={() => setActiveTab('itinerary')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'itinerary' ? 'text-[#2E4B71]' : 'text-[#a0a0a0]'}`}
                            >
                                <Icons.MapPin className="w-5 h-5" />
                                <span className="text-[10px] font-medium tracking-widest font-serif">日程</span>
                            </button>
                            
                            <div className="w-px h-6 bg-[#e0d8cf]"></div>

                            <button 
                                onClick={() => setActiveTab('tools')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'tools' ? 'text-[#2E4B71]' : 'text-[#a0a0a0]'}`}
                            >
                                <Icons.BookOpen className="w-5 h-5" />
                                <span className="text-[10px] font-medium tracking-widest font-serif">手帳</span>
                            </button>
                        </div>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

